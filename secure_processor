package main

import (
	"encoding/json"
	"os"
	"time"
)

type Bug struct {
	Time        string `json:"time"`
	Severity    string `json:"severity"`
	Module      string `json:"module"`
	Description string `json:"description"`
}

func main() {
	file := "bugs.json"
	var bugs []Bug

	data, _ := os.ReadFile(file)
	json.Unmarshal(data, &bugs)

	bug := Bug{
		Time:        time.Now().UTC().Format(time.RFC3339),
		Severity:    "CRITICAL",
		Module:      "Kernel",
		Description: "Unauthorized syscall access",
	}

	bugs = append(bugs, bug)
	out, _ := json.MarshalIndent(bugs, "", "  ")
	os.WriteFile(file, out, 0644)
}
